package service;


    import model.Employee;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;
import java.util.List;
import java.util.Scanner;
    public class EditEmployee {
        public static Employee edit() {
            Scanner sc = new Scanner(System.in);
            Path caminho = Paths.get("src/data/funcionarios.txt");

            try {
                List<String> linhas = Files.readAllLines(caminho);

                // Mostrar funcionários
                for (int i = 0; i < linhas.size(); i++) {
                    System.out.println((i + 1) + " - " + linhas.get(i));
                }

                // Selecionar funcionário
                System.out.println("Digite o número do funcionário a ser editado: ");
                int opcao = sc.nextInt();
                sc.nextLine(); // Consumir o \n restante

                // Validar índice
                if (opcao < 1 || opcao > linhas.size()) {
                    System.out.println("Número inválido.");
                    return null;
                }

              o  int index = pcao - 1;
                String linha = linhas.get(index);
                String[] partes = linha.split(";");

                String nomeStr = partes[1];

                // Editar dados conforme tipo
                if (partes[0].equals("Efetivo")) {
                    System.out.println("Insira a nova modalidade de contrato: ");
                    String tipoStr = sc.nextLine();

                    System.out.println("Insira o novo salário: ");
                    String salarioStr = sc.nextLine();

                    String novaLinha = String.format("%s;%s;%s", tipoStr, nomeStr, salarioStr);
                    linhas.set(index, novaLinha);

                } else if (partes[0].equals("Terceirizado")) {
                    System.out.println("Insira a nova modalidade de contrato: ");
                    String tipoStr = sc.nextLine();

                    System.out.println("Insira o novo salário: ");
                    String salarioStr = sc.nextLine();

                    System.out.println("Insira o bônus fixo: ");
                    String bonusFixo = sc.nextLine();

                    String novaLinha = String.format("%s;%s;%s;%s", tipoStr, nomeStr, salarioStr, bonusFixo);
                    linhas.set(index, novaLinha);
                } else {
                    System.out.println("Tipo de funcionário não reconhecido.");
                }

                // Salvar no arquivo
                Files.write(caminho, linhas, StandardOpenOption.TRUNCATE_EXISTING);
                System.out.println("Arquivo editado com sucesso.");

            } catch (IOException e) {
                throw new RuntimeException("Erro ao editar o arquivo: " + e.getMessage());
            }

            return null;
        }
    }

